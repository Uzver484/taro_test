<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cosmic Archetypes</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Montserrat:wght@300;500;700&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Montserrat', sans-serif;
      background-color: #0d0d2b; 
      color: #fff;
      min-height: 100vh;
      position: relative;
    }

    .stars-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      background: radial-gradient(ellipse at bottom, #0d0d2b 0%, #01010f 100%);
    }

    header.header {
      position: relative;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    }

    header h1 {
      font-family: 'Cinzel Decorative', cursive;
      font-size: 1.8rem;
    }

    .moon-indicator {
      display: flex;
      flex-direction: column;
      align-items: center;
      font-size: 1rem;
    }

    .moon-indicator span.emoji {
      font-size: 1.5rem;
    }

    .lang-button {
      background: linear-gradient(135deg, #9b59b6, #8e44ad);
      border: none;
      color: white;
      padding: 0.5rem 1rem;
      cursor: pointer;
      border-radius: 5px;
      transition: all 0.3s ease;
    }

    .lang-button:hover {
      background: linear-gradient(135deg, #a55eea, #975ec0);
    }

    main.container {
      max-width: 1000px;
      margin: 1rem auto;
      padding: 0 1rem;
      text-align: center;
    }

    section.loading-screen {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      text-align: center;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 10;
      background-color: #0d0d2b;
    }

    .spinner {
      border: 8px solid #ffffff33;
      border-top: 8px solid #fff;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    form.input-form {
      display: inline-flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      margin-bottom: 2rem;
      background: rgba(255, 255, 255, 0.05);
      padding: 1rem;
      border-radius: 10px;
      justify-content: center;
    }

    form input[type="number"] {
      padding: 0.5rem;
      border-radius: 5px;
      border: 1px solid #444;
      background: #1a1a3c;
      color: #fff;
      font-family: 'Cinzel Decorative', cursive;
      font-size: 1rem;
      text-align: center;
      width: 60px;
    }

    form button {
      padding: 0.5rem 1.2rem;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      background: linear-gradient(135deg, #9b59b6, #8e44ad);
      color: #fff;
      font-weight: bold;
      transition: background 0.3s ease;
    }

    form button:hover {
      background: linear-gradient(135deg, #a55eea, #975ec0);
    }

    .cards-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .card {
      perspective: 1000px;
      cursor: pointer;
      position: relative;
    }

    .card-inner {
      position: relative;
      width: 100%;
      height: 230px;
      transform-style: preserve-3d;
      transition: transform 0.6s;
    }

    .card.flipped .card-inner {
      transform: rotateY(180deg);
    }

    .card-front,
    .card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background-color: #1a1a3c;
      border-radius: 10px;
      padding: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      text-align: center;
    }

    .card-front img {
      width: 100%;
      height: 180px;
      object-fit: contain;
      border-radius: 8px;
    }

    .card-name {
      margin-top: 5px;
      font-weight: bold;
      color: #fff;
    }

    .card-back {
      transform: rotateY(180deg);
      color: #ddd;
      font-size: 0.9rem;
      line-height: 1.4;
    }

    h2#saved-label {
      margin-top: 2rem;
      font-size: 1.5rem;
    }

    .saved-layouts {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-top: 1rem;
      justify-content: center;
    }

    .layout-preview {
      background: rgba(255, 255, 255, 0.05);
      padding: 1rem;
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 180px;
    }

    .layout-cards img {
      width: 40px;
      margin: 2px;
    }

    .modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease;
    }

    .modal:not(.hidden) {
      opacity: 1;
      visibility: visible;
    }

    .modal .modal-content {
      background: #1a1a3c;
      padding: 2rem;
      border-radius: 10px;
      max-width: 90%;
      text-align: center;
    }

    .modal img {
      width: 100%;
      max-height: 80vh;
      object-fit: contain;
      border-radius: 10px;
    }

    .close-btn {
      position: absolute;
      top: 1rem;
      right: 1rem;
      font-size: 2rem;
      color: #fff;
      cursor: pointer;
    }

    .glass {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 10px;
    }

    @media (max-width: 600px) {
      header h1 {
        font-size: 1.3rem;
      }

      form.input-form {
        flex-direction: column;
      }

      .cards-container {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>

  <!-- –ó–≤–µ–∑–¥–Ω—ã–π —Ñ–æ–Ω -->
  <div class="stars-background" id="particles-js"></div>

  <!-- –•–µ–¥–µ—Ä -->
  <header class="header glass">
    <h1 id="title">Cosmic Archetypes</h1>
    <div id="moon-phase" class="moon-indicator">
      <span class="emoji">üåë</span>
      <span>–ù–æ–≤–æ–ª—É–Ω–∏–µ</span>
    </div>
    <button id="lang-switch" class="lang-button">RU</button>
  </header>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
  <main class="container">

    <!-- –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <section class="loading-screen active" id="loader">
      <div class="spinner"></div>
      <p id="loading-text">Connecting to the Cosmic Field...</p>
    </section>

    <!-- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
    <section class="content hidden" id="app">
      <form class="input-form glass">
        <label for="card-count">Choose number of cards:</label>
        <input type="number" id="card-count" min="1" max="78" value="3" />
        <button type="submit">Reveal Cards</button>
        <button type="button" id="save-layout-btn">Save this layout</button>
      </form>

      <div class="cards-container" id="cards"></div>

      <h2 id="saved-label">Saved Layouts</h2>
      <div class="saved-layouts" id="saved-layouts"></div>
    </section>
  </main>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
  <div class="modal glass hidden" id="modal">
    <span class="close-btn">&times;</span>
    <img id="modal-img" src="" alt="Card Image"/>
    <div class="modal-content">
      <h2 id="modal-title">Title</h2>
      <p id="modal-meaning">Meaning</p>
    </div>
  </div>

  <!-- Particles.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script> 

  <!-- –í—Å—Ç—Ä–∞–∏–≤–∞–µ–º JS –Ω–∞–ø—Ä—è–º—É—é -->
  <script>
    // –î–∞–Ω–Ω—ã–µ –æ –∫–∞—Ä—Ç–∞—Ö
    const cardImages = [
      "fool.jpg", "magician.jpg", "highpriestess.jpg", "empress.jpg", "emperor.jpg",
      "hierophant.jpg", "the_lovers.jpg", "the_chariot.jpg", "strength.jpg", "the_hermit.jpg",
      "the_wheel_of_fortune.jpg", "justice.jpg", "the_hanged_man.jpg", "death.jpg", "temperance.jpg",
      "the_devil.jpg", "the_tower.jpg", "the_star.jpg", "the_moon.jpg", "the_sun.jpg", "judgment.jpg", "the_world.jpg",
      "ace_of_wands.jpg", "two_of_wands.jpg", "three_of_wands.jpg", "four_of_wands.jpg", "five_of_wands.jpg",
      "six_of_wands.jpg", "seven_of_wands.jpg", "eight_of_wands.jpg", "nine_of_wands.jpg", "ten_of_wands.jpg",
      "page_of_wands.jpg", "knight_of_wands.jpg", "queen_of_wands.jpg", "king_of_wands.jpg",
      "ace_of_cups.jpg", "two_of_cups.jpg", "three_of_cups.jpg", "four_of_cups.jpg", "five_of_cups.jpg",
      "six_of_cups.jpg", "seven_of_cups.jpg", "eight_of_cups.jpg", "nine_of_cups.jpg", "ten_of_cups.jpg",
      "page_of_cups.jpg", "knight_of_cups.jpg", "queen_of_cups.jpg", "king_of_cups.jpg",
      "ace_of_swords.jpg", "two_of_swords.jpg", "three_of_swords.jpg", "four_of_swords.jpg", "five_of_swords.jpg",
      "six_of_swords.jpg", "seven_of_swords.jpg", "eight_of_swords.jpg", "nine_of_swords.jpg", "ten_of_swords.jpg",
      "page_of_swords.jpg", "knight_of_swords.jpg", "queen_of_swords.jpg", "king_of_swords.jpg",
      "ace_of_pentacles.jpg", "two_of_pentacles.jpg", "three_of_pentacles.jpg", "four_of_pentacles.jpg", "five_of_pentacles.jpg",
      "six_of_pentacles.jpg", "seven_of_pentacles.jpg", "eight_of_pentacles.jpg", "nine_of_pentacles.jpg", "ten_of_pentacles.jpg",
      "page_of_pentacles.jpg", "knight_of_pentacles.jpg", "queen_of_pentacles.jpg", "king_of_pentacles.jpg"
    ];

    // –†—É—Å—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è
    const cardNamesRu = {
      "fool.jpg": "–®—É—Ç",
      "magician.jpg": "–ú–∞–≥",
      "highpriestess.jpg": "–í–µ—Ä—Ö–æ–≤–Ω–∞—è –ñ—Ä–∏—Ü–∞",
      "empress.jpg": "–ò–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü–∞",
      "emperor.jpg": "–ò–º–ø–µ—Ä–∞—Ç–æ—Ä",
      "hierophant.jpg": "–°–≤—è—â–µ–Ω–Ω–æ—Å–ª—É–∂–∏—Ç–µ–ª—å",
      "the_lovers.jpg": "–í–ª—é–±–ª—ë–Ω–Ω—ã–µ",
      "the_chariot.jpg": "–ö–æ–ª–µ—Å–Ω–∏—Ü–∞",
      "strength.jpg": "–°–∏–ª–∞",
      "the_hermit.jpg": "–û—Ç—à–µ–ª—å–Ω–∏–∫",
      "the_wheel_of_fortune.jpg": "–ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã",
      "justice.jpg": "–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å",
      "the_hanged_man.jpg": "–ü–æ–≤–µ—à–µ–Ω–Ω—ã–π",
      "death.jpg": "–°–º–µ—Ä—Ç—å",
      "temperance.jpg": "–£–º–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å",
      "the_devil.jpg": "–î—å—è–≤–æ–ª",
      "the_tower.jpg": "–ë–∞—à–Ω—è",
      "the_star.jpg": "–ó–≤–µ–∑–¥–∞",
      "the_moon.jpg": "–õ—É–Ω–∞",
      "the_sun.jpg": "–°–æ–ª–Ω—Ü–µ",
      "judgment.jpg": "–°—É–¥",
      "the_world.jpg": "–ú–∏—Ä",
      "ace_of_wands.jpg": "–¢—É–∑ –ñ–µ–∑–ª–æ–≤",
      "two_of_wands.jpg": "–î–≤–æ–π–∫–∞ –ñ–µ–∑–ª–æ–≤",
      "three_of_wands.jpg": "–¢—Ä–æ–π–∫–∞ –ñ–µ–∑–ª–æ–≤",
      "four_of_wands.jpg": "–ß–µ—Ç–≤—ë—Ä–∫–∞ –ñ–µ–∑–ª–æ–≤",
      "five_of_wands.jpg": "–ü—è—Ç—ë—Ä–∫–∞ –ñ–µ–∑–ª–æ–≤",
      "six_of_wands.jpg": "–®–µ—Å—Ç—ë—Ä–∫–∞ –ñ–µ–∑–ª–æ–≤",
      "seven_of_wands.jpg": "–°–µ–º—ë—Ä–∫–∞ –ñ–µ–∑–ª–æ–≤",
      "eight_of_wands.jpg": "–í–æ—Å—å–º—ë—Ä–∫–∞ –ñ–µ–∑–ª–æ–≤",
      "nine_of_wands.jpg": "–î–µ–≤—è—Ç–∫–∞ –ñ–µ–∑–ª–æ–≤",
      "ten_of_wands.jpg": "–î–µ—Å—è—Ç–∫–∞ –ñ–µ–∑–ª–æ–≤",
      "page_of_wands.jpg": "–ü–∞–∂ –ñ–µ–∑–ª–æ–≤",
      "knight_of_wands.jpg": "–†—ã—Ü–∞—Ä—å –ñ–µ–∑–ª–æ–≤",
      "queen_of_wands.jpg": "–ö–æ—Ä–æ–ª–µ–≤–∞ –ñ–µ–∑–ª–æ–≤",
      "king_of_wands.jpg": "–ö–æ—Ä–æ–ª—å –ñ–µ–∑–ª–æ–≤",
      "ace_of_cups.jpg": "–¢—É–∑ –ö—É–±–∫–æ–≤",
      "two_of_cups.jpg": "–î–≤–æ–π–∫–∞ –ö—É–±–∫–æ–≤",
      "three_of_cups.jpg": "–¢—Ä–æ–π–∫–∞ –ö—É–±–∫–æ–≤",
      "four_of_cups.jpg": "–ß–µ—Ç–≤—ë—Ä–∫–∞ –ö—É–±–∫–æ–≤",
      "five_of_cups.jpg": "–ü—è—Ç—ë—Ä–∫–∞ –ö—É–±–∫–æ–≤",
      "six_of_cups.jpg": "–®–µ—Å—Ç—ë—Ä–∫–∞ –ö—É–±–∫–æ–≤",
      "seven_of_cups.jpg": "–°–µ–º—ë—Ä–∫–∞ –ö—É–±–∫–æ–≤",
      "eight_of_cups.jpg": "–í–æ—Å—å–º—ë—Ä–∫–∞ –ö—É–±–∫–æ–≤",
      "nine_of_cups.jpg": "–î–µ–≤—è—Ç–∫–∞ –ö—É–±–∫–æ–≤",
      "ten_of_cups.jpg": "–î–µ—Å—è—Ç–∫–∞ –ö—É–±–∫–æ–≤",
      "page_of_cups.jpg": "–ü–∞–∂ –ö—É–±–∫–æ–≤",
      "knight_of_cups.jpg": "–†—ã—Ü–∞—Ä—å –ö—É–±–∫–æ–≤",
      "queen_of_cups.jpg": "–ö–æ—Ä–æ–ª–µ–≤–∞ –ö—É–±–∫–æ–≤",
      "king_of_cups.jpg": "–ö–æ—Ä–æ–ª—å –ö—É–±–∫–æ–≤",
      "ace_of_swords.jpg": "–¢—É–∑ –ú–µ—á–µ–π",
      "two_of_swords.jpg": "–î–≤–æ–π–∫–∞ –ú–µ—á–µ–π",
      "three_of_swords.jpg": "–¢—Ä–æ–π–∫–∞ –ú–µ—á–µ–π",
      "four_of_swords.jpg": "–ß–µ—Ç–≤—ë—Ä–∫–∞ –ú–µ—á–µ–π",
      "five_of_swords.jpg": "–ü—è—Ç—ë—Ä–∫–∞ –ú–µ—á–µ–π",
      "six_of_swords.jpg": "–®–µ—Å—Ç—ë—Ä–∫–∞ –ú–µ—á–µ–π",
      "seven_of_swords.jpg": "–°–µ–º—ë—Ä–∫–∞ –ú–µ—á–µ–π",
      "eight_of_swords.jpg": "–í–æ—Å—å–º—ë—Ä–∫–∞ –ú–µ—á–µ–π",
      "nine_of_swords.jpg": "–î–µ–≤—è—Ç–∫–∞ –ú–µ—á–µ–π",
      "ten_of_swords.jpg": "–î–µ—Å—è—Ç–∫–∞ –ú–µ—á–µ–π",
      "page_of_swords.jpg": "–ü–∞–∂ –ú–µ—á–µ–π",
      "knight_of_swords.jpg": "–†—ã—Ü–∞—Ä—å –ú–µ—á–µ–π",
      "queen_of_swords.jpg": "–ö–æ—Ä–æ–ª–µ–≤–∞ –ú–µ—á–µ–π",
      "king_of_swords.jpg": "–ö–æ—Ä–æ–ª—å –ú–µ—á–µ–π",
      "ace_of_pentacles.jpg": "–¢—É–∑ –ü–µ–Ω—Ç–∞–∫–ª–µ–π",
      "two_of_pentacles.jpg": "–î–≤–æ–π–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π",
      "three_of_pentacles.jpg": "–¢—Ä–æ–π–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π",
      "four_of_pentacles.jpg": "–ß–µ—Ç–≤—ë—Ä–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π",
      "five_of_pentacles.jpg": "–ü—è—Ç—ë—Ä–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π",
      "six_of_pentacles.jpg": "–®–µ—Å—Ç—ë—Ä–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π",
      "seven_of_pentacles.jpg": "–°–µ–º—ë—Ä–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π",
      "eight_of_pentacles.jpg": "–í–æ—Å—å–º—ë—Ä–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π",
      "nine_of_pentacles.jpg": "–î–µ–≤—è—Ç–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π",
      "ten_of_pentacles.jpg": "–î–µ—Å—è—Ç–∫–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π",
      "page_of_pentacles.jpg": "–ü–∞–∂ –ü–µ–Ω—Ç–∞–∫–ª–µ–π",
      "knight_of_pentacles.jpg": "–†—ã—Ü–∞—Ä—å –ü–µ–Ω—Ç–∞–∫–ª–µ–π",
      "queen_of_pentacles.jpg": "–ö–æ—Ä–æ–ª–µ–≤–∞ –ü–µ–Ω—Ç–∞–∫–ª–µ–π",
      "king_of_pentacles.jpg": "–ö–æ—Ä–æ–ª—å –ü–µ–Ω—Ç–∞–∫–ª–µ–π"
    };

    // –ê–Ω–≥–ª–∏–π—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è
    const cardNamesEn = Object.fromEntries(
      Object.entries(cardNamesRu).map(([key]) => [key, key.replace(".jpg", "").replace(/_/g, " ")])
    );

    // –ó–Ω–∞—á–µ–Ω–∏—è –∫–∞—Ä—Ç
    const meanings = {
      en: {
        "fool.jpg": "New beginnings, spontaneity, limitless potential.",
        "magician.jpg": "Power, skill, concentration, manifestation.",
        "highpriestess.jpg": "Intuition, subconscious, inner wisdom.",
        "empress.jpg": "Femininity, beauty, nature, nurturing.",
        "emperor.jpg": "Authority, structure, control, fatherhood.",
        "hierophant.jpg": "Tradition, institutions, education, morality.",
        "the_lovers.jpg": "Love, harmony, union, values alignment.",
        "the_chariot.jpg": "Determination, victory, willpower.",
        "strength.jpg": "Courage, compassion, focus, mastery.",
        "the_hermit.jpg": "Soul searching, solitude, inner guidance.",
        "the_wheel_of_fortune.jpg": "Change, cycles, inevitable fate.",
        "justice.jpg": "Fairness, truth, cause and effect.",
        "the_hanged_man.jpg": "Pause, surrender, new perspectives.",
        "death.jpg": "Endings, transformation, rebirth.",
        "temperance.jpg": "Balance, moderation, patience, purpose.",
        "the_devil.jpg": "Addiction, materialism, playfulness.",
        "the_tower.jpg": "Awakening, chaos, revelation, disruption.",
        "the_star.jpg": "Hope, faith, renewal, inspiration.",
        "the_moon.jpg": "Illusion, intuition, fear, subconscious.",
        "the_sun.jpg": "Joy, success, vitality, celebration.",
        "judgment.jpg": "Reflection, reckoning, awakening.",
        "the_world.jpg": "Completion, wholeness, travel.",
        "ace_of_wands.jpg": "Inspiration, new opportunities, growth.",
        "two_of_wands.jpg": "Planning, choices, foresight.",
        "three_of_wands.jpg": "Expansion, progress, long-term vision.",
        "four_of_wands.jpg": "Celebration, homecoming, stability.",
        "five_of_wands.jpg": "Competition, conflict, tension.",
        "six_of_wands.jpg": "Victory, recognition, self-confidence.",
        "seven_of_wands.jpg": "Defence, standing your ground.",
        "eight_of_wands.jpg": "Movement, swiftness, action.",
        "nine_of_wands.jpg": "Resilience, persistence, last stand.",
        "ten_of_wands.jpg": "Burden, responsibility, weight.",
        "page_of_wands.jpg": "Adventure, exploration, enthusiasm.",
        "knight_of_wands.jpg": "Chivalry, passion, energy.",
        "queen_of_wands.jpg": "Confidence, charisma, warmth.",
        "king_of_wands.jpg": "Leadership, vision, authority.",
        "ace_of_cups.jpg": "Emotional beginning, love, healing.",
        "two_of_cups.jpg": "Partnership, mutual connection.",
        "three_of_cups.jpg": "Friendship, celebration, support.",
        "four_of_cups.jpg": "Apathy, contemplation, re-evaluation.",
        "five_of_cups.jpg": "Loss, grief, disappointment.",
        "six_of_cups.jpg": "Nostalgia, childhood memories, innocence.",
        "seven_of_cups.jpg": "Choices, illusions, fantasy.",
        "eight_of_cups.jpg": "Walking away, leaving behind.",
        "nine_of_cups.jpg": "Contentment, emotional fulfillment.",
        "ten_of_cups.jpg": "Harmony, family, community.",
        "page_of_cups.jpg": "Creativity, sensitivity, intuition.",
        "knight_of_cups.jpg": "Romantic, charming, courteous.",
        "queen_of_cups.jpg": "Empathy, compassion, calm.",
        "king_of_cups.jpg": "Emotional balance, diplomacy.",
        "ace_of_swords.jpg": "Truth, clarity, breakthrough.",
        "two_of_swords.jpg": "Stalemate, difficult choice.",
        "three_of_swords.jpg": "Heartbreak, sorrow, betrayal.",
        "four_of_swords.jpg": "Rest, retreat, recovery.",
        "five_of_swords.jpg": "Conflict, defeat, loss.",
        "six_of_swords.jpg": "Transition, moving forward.",
        "seven_of_swords.jpg": "Deception, dishonesty, trickery.",
        "eight_of_swords.jpg": "Trapped, restricted, powerless.",
        "nine_of_swords.jpg": "Anxiety, fear, nightmares.",
        "ten_of_swords.jpg": "Rock bottom, betrayal, ending.",
        "page_of_swords.jpg": "Curiosity, alertness, message.",
        "knight_of_swords.jpg": "Impulsiveness, directness, speed.",
        "queen_of_swords.jpg": "Clarity, independence, honesty.",
        "king_of_swords.jpg": "Intellect, leadership, fairness.",
        "ace_of_pentacles.jpg": "Material gain, prosperity, abundance.",
        "two_of_pentacles.jpg": "Balance, adaptability, juggling.",
        "three_of_pentacles.jpg": "Teamwork, collaboration, craftsmanship.",
        "four_of_pentacles.jpg": "Possessions, security, greed.",
        "five_of_pentacles.jpg": "Hardship, poverty, exclusion.",
        "six_of_pentacles.jpg": "Charity, sharing, generosity.",
        "seven_of_pentacles.jpg": "Assessment, evaluation, patience.",
        "eight_of_pentacles.jpg": "Dedication, craftsmanship, repetition.",
        "nine_of_pentacles.jpg": "Self-sufficiency, luxury, independence.",
        "ten_of_pentacles.jpg": "Wealth, legacy, family.",
        "page_of_pentacles.jpg": "Learning, routine, practicality.",
        "knight_of_pentacles.jpg": "Responsibility, reliability, patience.",
        "queen_of_pentacles.jpg": "Security, comfort, mothering.",
        "king_of_pentacles.jpg": "Wealth, stability, business."
      },
      ru: {
        "fool.jpg": "–ù–æ–≤—ã–µ –Ω–∞—á–∏–Ω–∞–Ω–∏—è, –∏–º–ø—É–ª—å—Å–∏–≤–Ω–æ—Å—Ç—å, –±–µ–∑–≥—Ä–∞–Ω–∏—á–Ω—ã–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª.",
        "magician.jpg": "–í–ª–∞—Å—Ç—å, –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ, –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è, –ø—Ä–æ—è–≤–ª–µ–Ω–∏–µ.",
        "highpriestess.jpg": "–ò–Ω—Ç—É–∏—Ü–∏—è, –ø–æ–¥—Å–æ–∑–Ω–∞–Ω–∏–µ, –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –º—É–¥—Ä–æ—Å—Ç—å.",
        "empress.jpg": "–ñ–µ–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, –∫—Ä–∞—Å–æ—Ç–∞, –ø—Ä–∏—Ä–æ–¥–∞, –∑–∞–±–æ—Ç–∞.",
        "emperor.jpg": "–ê–≤—Ç–æ—Ä–∏—Ç–µ—Ç, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –∫–æ–Ω—Ç—Ä–æ–ª—å, –æ—Ç—Ü–æ–≤—Å—Ç–≤–æ.",
        "hierophant.jpg": "–¢—Ä–∞–¥–∏—Ü–∏–∏, –∏–Ω—Å—Ç–∏—Ç—É—Ç—ã, –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –º–æ—Ä–∞–ª—å.",
        "the_lovers.jpg": "–õ—é–±–æ–≤—å, –≥–∞—Ä–º–æ–Ω–∏—è, —Å–æ—é–∑, —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π.",
        "the_chariot.jpg": "–†–µ—à–∏–º–æ—Å—Ç—å, –ø–æ–±–µ–¥–∞, —Å–∏–ª–∞ –≤–æ–ª–∏.",
        "strength.jpg": "–°–º–µ–ª–æ—Å—Ç—å, —Å–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏–µ, —Å–∞–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—å, –≤–ª–∞—Å—Ç—å –Ω–∞–¥ —Å–æ–±–æ–π.",
        "the_hermit.jpg": "–ü–æ–∏—Å–∫ —Å–µ–±—è, —É–µ–¥–∏–Ω–µ–Ω–∏–µ, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ.",
        "the_wheel_of_fortune.jpg": "–ü–µ—Ä–µ–º–µ–Ω—ã, —Ü–∏–∫–ª—ã, –Ω–µ–∏–∑–±–µ–∂–Ω–∞—è —Å—É–¥—å–±–∞.",
        "justice.jpg": "–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å, –∏—Å—Ç–∏–Ω–∞, –ø—Ä–∏—á–∏–Ω—ã –∏ —Å–ª–µ–¥—Å—Ç–≤–∏—è.",
        "the_hanged_man.jpg": "–ü–∞—É–∑–∞, –ø—Ä–∏–Ω—è—Ç–∏–µ, –Ω–æ–≤—ã–µ —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è.",
        "death.jpg": "–ó–∞–≤–µ—Ä—à–µ–Ω–∏—è, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è, –≤–æ–∑—Ä–æ–∂–¥–µ–Ω–∏–µ.",
        "temperance.jpg": "–ë–∞–ª–∞–Ω—Å, —É–º–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å, —Ç–µ—Ä–ø–µ–Ω–∏–µ, —Ü–µ–ª—å–Ω–æ—Å—Ç—å.",
        "the_devil.jpg": "–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–º, –≤–µ—Å–µ–ª—å–µ.",
        "the_tower.jpg": "–ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ, —Ö–∞–æ—Å, –æ—Ç–∫—Ä–æ–≤–µ–Ω–∏–µ, —Ä–∞–∑—Ä—É—à–µ–Ω–∏–µ.",
        "the_star.jpg": "–ù–∞–¥–µ–∂–¥–∞, –≤–µ—Ä–∞, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ.",
        "the_moon.jpg": "–ò–ª–ª—é–∑–∏—è, –∏–Ω—Ç—É–∏—Ü–∏—è, —Å—Ç—Ä–∞—Ö, –±–µ—Å—Å–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–æ–µ.",
        "the_sun.jpg": "–†–∞–¥–æ—Å—Ç—å, —É—Å–ø–µ—Ö, –∂–∏–∑–Ω–µ–Ω–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è, —Ç–æ—Ä–∂–µ—Å—Ç–≤–æ.",
        "judgment.jpg": "–†–µ—Ñ–ª–µ–∫—Å–∏—è, –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ, –æ—Å–æ–∑–Ω–∞–Ω–∏–µ.",
        "the_world.jpg": "–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ, —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å, –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ.",
        "ace_of_wands.jpg": "–í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ, –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, —Ä–æ—Å—Ç.",
        "two_of_wands.jpg": "–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –≤—ã–±–æ—Ä, –¥–∞–ª—å–Ω–æ–≤–∏–¥–Ω–æ—Å—Ç—å.",
        "three_of_wands.jpg": "–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ, –ø—Ä–æ–≥—Ä–µ—Å—Å, –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —Ü–µ–ª–∏.",
        "four_of_wands.jpg": "–ü—Ä–∞–∑–¥–Ω–∏–∫, –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –¥–æ–º–æ–π, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å.",
        "five_of_wands.jpg": "–ö–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è, –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, –∫–æ–Ω—Ñ–ª–∏–∫—Ç.",
        "six_of_wands.jpg": "–ü–æ–±–µ–¥–∞, –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ, —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å–µ–±–µ.",
        "seven_of_wands.jpg": "–ó–∞—â–∏—Ç–∞, —Å—Ç–æ–π–∫–æ—Å—Ç—å, –∑–∞—â–∏—Ç–∞ –ø–æ–∑–∏—Ü–∏–∏.",
        "eight_of_wands.jpg": "–î–≤–∏–∂–µ–Ω–∏–µ, –±—ã—Å—Ç—Ä–æ—Ç–∞, –¥–µ–π—Å—Ç–≤–∏–µ.",
        "nine_of_wands.jpg": "–°—Ç–æ–π–∫–æ—Å—Ç—å, –Ω–∞—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å, –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä—É–±–µ–∂.",
        "ten_of_wands.jpg": "–ù–∞–≥—Ä—É–∑–∫–∞, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, –¥–∞–≤–ª–µ–Ω–∏–µ.",
        "page_of_wands.jpg": "–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è, –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, —ç–Ω—Ç—É–∑–∏–∞–∑–º.",
        "knight_of_wands.jpg": "–ì–∞–ª–∞–Ω—Ç–Ω–æ—Å—Ç—å, —Å—Ç—Ä–∞—Å—Ç—å, —ç–Ω–µ—Ä–≥–∏—è.",
        "queen_of_wands.jpg": "–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å, —Ö–∞—Ä–∏–∑–º–∞, —Ç–µ–ø–ª–æ.",
        "king_of_wands.jpg": "–õ–∏–¥–µ—Ä—Å—Ç–≤–æ, –≤–∏–¥–µ–Ω–∏–µ, –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç.",
        "ace_of_cups.jpg": "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –Ω–∞—á–∞–ª–æ, –ª—é–±–æ–≤—å, –∏—Å—Ü–µ–ª–µ–Ω–∏–µ.",
        "two_of_cups.jpg": "–ü–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–æ, –≤–∑–∞–∏–º–æ–ø–æ–Ω–∏–º–∞–Ω–∏–µ.",
        "three_of_cups.jpg": "–î—Ä—É–∂–±–∞, –ø—Ä–∞–∑–¥–Ω–∏–∫, –ø–æ–¥–¥–µ—Ä–∂–∫–∞.",
        "four_of_cups.jpg": "–ê–ø–∞—Ç–∏—è, —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–µ, –ø–µ—Ä–µ–æ—Ü–µ–Ω–∫–∞.",
        "five_of_cups.jpg": "–ü–æ—Ç–µ—Ä—è, –≥–æ—Ä–µ, —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ.",
        "six_of_cups.jpg": "–ù–æ—Å—Ç–∞–ª—å–≥–∏—è, –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è –¥–µ—Ç—Å—Ç–≤–∞, –Ω–µ–≤–∏–Ω–Ω–æ—Å—Ç—å.",
        "seven_of_cups.jpg": "–í—ã–±–æ—Ä, –∏–ª–ª—é–∑–∏–∏, —Ñ–∞–Ω—Ç–∞–∑–∏–∏.",
        "eight_of_cups.jpg": "–£—Ö–æ–¥, –æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∞–¥–∏.",
        "nine_of_cups.jpg": "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏–µ, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏–µ.",
        "ten_of_cups.jpg": "–ì–∞—Ä–º–æ–Ω–∏—è, —Å–µ–º—å—è, —Å–æ–æ–±—â–µ—Å—Ç–≤–æ.",
        "page_of_cups.jpg": "–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ, —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –∏–Ω—Ç—É–∏—Ü–∏—è.",
        "knight_of_cups.jpg": "–†–æ–º–∞–Ω—Ç–∏—á–Ω–æ—Å—Ç—å, –æ–±–∞—è–Ω–∏–µ, —É—á—Ç–∏–≤–æ—Å—Ç—å.",
        "queen_of_cups.jpg": "–°–æ—á—É–≤—Å—Ç–≤–∏–µ, –¥–æ–±—Ä–æ—Ç–∞, —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ.",
        "king_of_cups.jpg": "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ, –¥–∏–ø–ª–æ–º–∞—Ç–∏—á–Ω–æ—Å—Ç—å.",
        "ace_of_swords.jpg": "–ò—Å—Ç–∏–Ω–∞, —è—Å–Ω–æ—Å—Ç—å, –ø—Ä–æ—Ä—ã–≤.",
        "two_of_swords.jpg": "–ü–∞—Ç–æ–≤–∞—è —Å–∏—Ç—É–∞—Ü–∏—è, —Å–ª–æ–∂–Ω—ã–π –≤—ã–±–æ—Ä.",
        "three_of_swords.jpg": "–†–∞–∑–±–∏—Ç–æ–µ —Å–µ—Ä–¥—Ü–µ, —Å–∫–æ—Ä–±—å, –ø—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ.",
        "four_of_swords.jpg": "–ü–æ–∫–æ–π, –æ—Ç–¥—ã—Ö, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏–ª.",
        "five_of_swords.jpg": "–ö–æ–Ω—Ñ–ª–∏–∫—Ç, –ø–æ—Ä–∞–∂–µ–Ω–∏–µ, –ø–æ—Ç–µ—Ä—è.",
        "six_of_swords.jpg": "–ü–µ—Ä–µ—Ö–æ–¥, –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä—ë–¥.",
        "seven_of_swords.jpg": "–û–±–º–∞–Ω, –Ω–µ—á–µ—Å—Ç–Ω–æ—Å—Ç—å, –∫–æ–≤–∞—Ä—Å—Ç–≤–æ.",
        "eight_of_swords.jpg": "–ü–ª–µ–Ω, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –±–µ—Å–ø–æ–º–æ—â–Ω–æ—Å—Ç—å.",
        "nine_of_swords.jpg": "–¢—Ä–µ–≤–æ–≥–∞, —Å—Ç—Ä–∞—Ö, –∫–æ—à–º–∞—Ä—ã.",
        "ten_of_swords.jpg": "–î–Ω–æ, –ø—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ.",
        "page_of_swords.jpg": "–õ—é–±–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –ø–æ—Å–ª–∞–Ω–∏–µ.",
        "knight_of_swords.jpg": "–ü–æ—Å–ø–µ—à–Ω–æ—Å—Ç—å, –ø—Ä—è–º–æ—Ç–∞, —Å–∫–æ—Ä–æ—Å—Ç—å.",
        "queen_of_swords.jpg": "–Ø—Å–Ω–æ—Å—Ç—å, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, —á–µ—Å—Ç–Ω–æ—Å—Ç—å.",
        "king_of_swords.jpg": "–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç, –ª–∏–¥–µ—Ä—Å—Ç–≤–æ, —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å.",
        "ace_of_pentacles.jpg": "–ú–∞—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–µ –±–ª–∞–≥–æ–ø–æ–ª—É—á–∏–µ, –ø—Ä–æ—Ü–≤–µ—Ç–∞–Ω–∏–µ, –∏–∑–æ–±–∏–ª–∏–µ.",
        "two_of_pentacles.jpg": "–ë–∞–ª–∞–Ω—Å, –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.",
        "three_of_pentacles.jpg": "–°–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ, –∫–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞, –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ.",
        "four_of_pentacles.jpg": "–°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –∂–∞–¥–Ω–æ—Å—Ç—å.",
        "five_of_pentacles.jpg": "–¢—Ä—É–¥–Ω–æ—Å—Ç–∏, –±–µ–¥–Ω–æ—Å—Ç—å, –∏—Å–∫–ª—é—á–µ–Ω–∏–µ.",
        "six_of_pentacles.jpg": "–©–µ–¥—Ä–æ—Å—Ç—å, –¥–µ–ª–µ–Ω–∏–µ, –ø–æ–º–æ—â—å.",
        "seven_of_pentacles.jpg": "–û—Ü–µ–Ω–∫–∞, –∞–Ω–∞–ª–∏–∑, —Ç–µ—Ä–ø–µ–Ω–∏–µ.",
        "eight_of_pentacles.jpg": "–ü—Ä–µ–¥–∞–Ω–Ω–æ—Å—Ç—å, —Ä–µ–º–µ—Å–ª–æ, –ø–æ–≤—Ç–æ—Ä—è–µ–º–æ—Å—Ç—å.",
        "nine_of_pentacles.jpg": "–°–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å, –∫–æ–º—Ñ–æ—Ä—Ç, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å.",
        "ten_of_pentacles.jpg": "–ë–æ–≥–∞—Ç—Å—Ç–≤–æ, –Ω–∞—Å–ª–µ–¥–∏–µ, —Å–µ–º—å—è.",
        "page_of_pentacles.jpg": "–û–±—É—á–µ–Ω–∏–µ, –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ—Å—Ç—å, –ø—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç—å.",
        "knight_of_pentacles.jpg": "–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å, —Ç–µ—Ä–ø–µ–Ω–∏–µ.",
        "queen_of_pentacles.jpg": "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, —É—é—Ç, –∑–∞–±–æ—Ç–∞.",
        "king_of_pentacles.jpg": "–ë–æ–≥–∞—Ç—Å—Ç–≤–æ, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –±–∏–∑–Ω–µ—Å."
      }
    };

    let currentLang = localStorage.getItem("lang") || "en";

    function updateText() {
      document.getElementById("title").textContent = translations[currentLang].title;
      document.querySelector(".input-form label").textContent = translations[currentLang].chooseCards;
      document.querySelector(".input-form button[type='submit']").textContent = translations[currentLang].reveal;
      document.querySelector("#save-layout-btn").textContent = translations[currentLang].saveLayout;
      document.getElementById("saved-label").textContent = translations[currentLang].savedLayouts;
      document.getElementById("loading-text").textContent = translations[currentLang].loading;

      document.querySelectorAll(".card-name").forEach(el => {
        const cardFile = el.dataset.card;
        el.textContent = currentLang === "ru" ? cardNamesRu[cardFile] : cardNamesEn[cardFile];
      });

      document.querySelectorAll(".card-back").forEach(backEl => {
        const cardFile = backEl.closest('.card')?.querySelector('img')?.src.split("/").pop();
        if (!cardFile) return;
        backEl.textContent = meanings[currentLang][cardFile] || "–ó–Ω–∞—á–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.";
      });

      document.getElementById("lang-switch").textContent = currentLang === "en" ? "RU" : "EN";
    }

    const translations = {
      en: {
        title: "Cosmic Archetypes",
        chooseCards: "Choose number of cards:",
        reveal: "Reveal Cards",
        saveLayout: "Save this layout",
        savedLayouts: "Saved Layouts",
        loading: "Connecting to the Cosmic Field..."
      },
      ru: {
        title: "–ö–æ—Å–º–∏—á–µ—Å–∫–∏–µ –ê—Ä—Ö–µ—Ç–∏–ø—ã",
        chooseCards: "–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Ä—Ç:",
        reveal: "–ü–æ–∫–∞–∑–∞—Ç—å –ö–∞—Ä—Ç—ã",
        saveLayout: "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –†–∞—Å–∫–ª–∞–¥",
        savedLayouts: "–°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –†–∞—Å–∫–ª–∞–¥—ã",
        loading: "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ö–æ—Å–º–∏—á–µ—Å–∫–æ–º—É –ü–æ–ª—é..."
      }
    };

    document.getElementById("lang-switch").addEventListener("click", () => {
      currentLang = currentLang === "en" ? "ru" : "en";
      localStorage.setItem("lang", currentLang);
      updateText();
    });

    document.addEventListener("DOMContentLoaded", () => {
      particlesJS.load('particles-js', '', {
        "particles": {
          "number": {
            "value": 160,
            "density": {
              "enable": true,
              "value_area": 800
            }
          },
          "color": {
            "value": ["#ffffff", "#cceeff", "#ffccff"]
          },
          "shape": {
            "type": "circle"
          },
          "opacity": {
            "value": 0.5,
            "random": true,
            "anim": {
              "enable": true,
              "speed": 0.5,
              "opacity_min": 0.1,
              "sync": false
            }
          },
          "size": {
            "value": 2,
            "random": true,
            "anim": {
              "enable": true,
              "speed": 2,
              "size_min": 1,
              "sync": false
            }
          },
          "line_linked": {
            "enable": true,
            "distance": 150,
            "color": "#ffffff",
            "opacity": 0.2,
            "width": 1
          },
          "move": {
            "enable": true,
            "speed": 0.5,
            "direction": "none",
            "random": true,
            "straight": false,
            "out_mode": "bounce"
          }
        },
        "interactivity": {
          "events": {
            "onhover": {
              "enable": true,
              "mode": "repulse"
            },
            "onclick": {
              "enable": true,
              "mode": "push"
            }
          },
          "modes": {
            "repulse": {
              "distance": 70,
              "duration": 0.4
            },
            "push": {
              "particles_nb": 4
            }
          }
        },
        "retina_detect": true
      });

      updateText();
      displayMoonPhase();
      loadSavedLayouts();

      window.addEventListener("load", () => {
  loader.classList.remove("active");
  loader.style.display = "none";
  document.getElementById("app").classList.remove("hidden");
});
    });

    document.querySelector("form").addEventListener("submit", e => {
      e.preventDefault();
      const count = parseInt(document.getElementById("card-count").value);
      const container = document.getElementById("cards");
      container.innerHTML = "";
      const shuffled = [...cardImages].sort(() => Math.random() - 0.5).slice(0, count);

      shuffled.forEach((card) => {
        const cardDiv = document.createElement("div");
        cardDiv.classList.add("card");

        const inner = document.createElement("div");
        inner.classList.add("card-inner");

        const front = document.createElement("div");
        front.classList.add("card-front");

        const img = document.createElement("img");
        img.src = `images/cards/${card}`;
        img.alt = card;

        const name = document.createElement("div");
        name.classList.add("card-name");
        name.dataset.card = card;
        name.textContent = currentLang === "ru" ? cardNamesRu[card] : cardNamesEn[card];

        front.appendChild(img);
        front.appendChild(name);

        const back = document.createElement("div");
        back.classList.add("card-back");
        back.textContent = meanings[currentLang][card] || "–ó–Ω–∞—á–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.";

        inner.appendChild(front);
        inner.appendChild(back);
        cardDiv.appendChild(inner);

        cardDiv.addEventListener("click", () => {
          cardDiv.classList.toggle("flipped");
        });

        cardDiv.addEventListener("dblclick", () => {
          showModal(card);
        });

        container.appendChild(cardDiv);
      });
    });

    document.getElementById("save-layout-btn").addEventListener("click", () => {
      const cards = Array.from(document.querySelectorAll(".card")).map(c => {
        const img = c.querySelector("img");
        return img?.src.split("/").pop() || "";
      });

      if (!cards.length) return;

      let layouts = JSON.parse(localStorage.getItem("layouts")) || [];
      layouts.push({ id: Date.now(), cards });
      localStorage.setItem("layouts", JSON.stringify(layouts));

      loadSavedLayouts();
    });

    function loadSavedLayouts() {
      const container = document.getElementById("saved-layouts");
      container.innerHTML = "";

      const layouts = JSON.parse(localStorage.getItem("layouts")) || [];

      layouts.slice(-3).forEach(layout => {
        const div = document.createElement("div");
        div.className = "layout-preview glass";
        div.innerHTML = `
          <strong>${translations[currentLang].title} #${layout.id}</strong>
          <div class="layout-cards">
            ${layout.cards.map(card => `<img src="images/cards/${card}" width="50" alt="">`).join("")}
          </div>
          <button onclick="loadLayout('${layout.id}')">${translations[currentLang].reveal}</button>
        `;
        container.appendChild(div);
      });
    }

    window.loadLayout = function(id) {
      const layouts = JSON.parse(localStorage.getItem("layouts")) || [];
      const layout = layouts.find(l => l.id == id);
      if (!layout) return;

      const container = document.getElementById("cards");
      container.innerHTML = "";

      layout.cards.forEach((card) => {
        const cardDiv = document.createElement("div");
        cardDiv.classList.add("card");

        const inner = document.createElement("div");
        inner.classList.add("card-inner");

        const front = document.createElement("div");
        front.classList.add("card-front");

        const img = document.createElement("img");
        img.src = `images/cards/${card}`;
        img.alt = card;

        const name = document.createElement("div");
        name.classList.add("card-name");
        name.dataset.card = card;
        name.textContent = currentLang === "ru" ? cardNamesRu[card] : cardNamesEn[card];

        front.appendChild(img);
        front.appendChild(name);

        const back = document.createElement("div");
        back.classList.add("card-back");
        back.textContent = meanings[currentLang][card] || "–ó–Ω–∞—á–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.";

        inner.appendChild(front);
        inner.appendChild(back);
        cardDiv.appendChild(inner);

        cardDiv.addEventListener("click", () => {
          cardDiv.classList.toggle("flipped");
        });

        cardDiv.addEventListener("dblclick", () => {
          showModal(card);
        });

        container.appendChild(cardDiv);
      });
    };

    function showModal(filename) {
      const modal = document.getElementById("modal");
      const img = document.getElementById("modal-img");
      const title = document.getElementById("modal-title");
      const meaning = document.getElementById("modal-meaning");

      img.src = `images/cards/${filename}`;
      title.textContent = currentLang === "ru" ? cardNamesRu[filename] : cardNamesEn[filename];
      meaning.textContent = meanings[currentLang][filename] || "–ó–Ω–∞—á–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.";

      modal.classList.remove("hidden");
    }

    document.querySelector(".close-btn").addEventListener("click", () => {
      document.getElementById("modal").classList.add("hidden");
    });

    document.getElementById("modal").addEventListener("click", function(e) {
      if (e.target === this) {
        this.classList.add("hidden");
      }
    });

    function getMoonPhase(date = new Date()) {
      const moonCycles = 29.530588853;
      const newMoonDate = new Date(2000, 0, 6, 18, 14);
      const daysSince = (date - newMoonDate) / (1000 * 60 * 60 * 24);
      const phase = ((daysSince % moonCycles) + moonCycles) % moonCycles;

      const phases = [
        { name: "New Moon", emoji: "üåë" },
        { name: "Waxing Crescent", emoji: "üåí" },
        { name: "First Quarter", emoji: "üåì" },
        { name: "Waxing Gibbous", emoji: "üåî" },
        { name: "Full Moon", emoji: "üåï" },
        { name: "Waning Gibbous", emoji: "üåñ" },
        { name: "Last Quarter", emoji: "üåó" },
        { name: "Waning Crescent", emoji: "üåò" }
      ];

      const index = Math.floor((phase / moonCycles) * 8);
      return phases[index];
    }

    function displayMoonPhase() {
      const phase = getMoonPhase();
      const moonEl = document.getElementById("moon-phase");

      const ruPhases = {
        "New Moon": "–ù–æ–≤–æ–ª—É–Ω–∏–µ",
        "Waxing Crescent": "–ú–æ–ª–æ–¥–∞—è –õ—É–Ω–∞",
        "First Quarter": "–ü–µ—Ä–≤–∞—è –ß–µ—Ç–≤–µ—Ä—Ç—å",
        "Waxing Gibbous": "–†–∞—Å—Ç—É—â–∞—è –õ—É–Ω–∞",
        "Full Moon": "–ü–æ–ª–Ω–æ–ª—É–Ω–∏–µ",
        "Waning Gibbous": "–£–±—ã–≤–∞—é—â–∞—è –õ—É–Ω–∞",
        "Last Quarter": "–ü–æ—Å–ª–µ–¥–Ω—è—è –ß–µ—Ç–≤–µ—Ä—Ç—å",
        "Waning Crescent": "–°—Ç–∞—Ä–∞—è –õ—É–Ω–∞"
      };

      moonEl.innerHTML = `
        <span class="emoji">${phase.emoji}</span>
        <span>${currentLang === "ru" ? ruPhases[phase.name] : phase.name}</span>
      `;
    }
  </script>
</body>
</html>
